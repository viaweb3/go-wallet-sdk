package api

import (
	"encoding/hex"
	"github.com/stretchr/testify/assert"
	"testing"
)

func TestUnmarshalJSON(t *testing.T) {
	code := `a11ceb0b0500000008010008020804030c150421020523100733500883012006a30114000000010002000301050800030403010002060105010001070002000008000200010403060c050301050001060c01080001030d6170746f735f6163636f756e740a6170746f735f636f696e04636f696e067369676e65720a616464726573735f6f66094170746f73436f696e0762616c616e6365046d696e74087472616e7366657200000000000000000000000000000000000000000000000000000000000000010308a0860100000000000308ffffffffffffffff000001170a0011000c030a03380007010a02170700172304120a000b030a0207001611020b000b010b02110302`
	c, err := hex.DecodeString(code)
	assert.Nil(t, err)
	var h HexBytes = c
	d, err := h.MarshalJSON()
	assert.Nil(t, err)
	var h2 HexBytes
	err = h2.UnmarshalJSON(d)
	assert.Nil(t, err)
	assert.Equal(t, h, h2)
}
